> 因为学习Java也有一年半的时间了嘛，对Java并发、JVM也有了一定的认识，对Java8的语法也在项目中有所使用，读这本书是看看大师们对Java的理解和使用建议，带着自己的一点偏激和拙见，希望在读书过程中能产生思维的碰撞

  

  



# 第一章、序言



从自然语言的学习过程出发，掌握一门语言无非三点：语法、词汇、用法。在课堂上很容易学习到前两种，但是可能使用起来仍会让人感到忍俊不禁。

大多数编程语言的书籍也是着重介绍前两点，如语言的类型（是面向过程、对象、函数的）和词汇（标准库，数据结构，操作，工具类），对于用法往往只是让你知道怎么用，而不是针对如何高效的去使用。

> 可能在中国这种情况更为严重，因为国外都是直接谷歌best practice，一般都是官方给出的最佳实践，而国内往往则是技术论坛去了解一项技术，难免有失偏颇。  

  



作者是sun公司的一个骨灰级Java程序员，我一直感觉sun公司有一种神秘且美好的光环，对比于现在的Oracle来说，少了非常多的商业味道，各大组织纷纷参与到Java的开发和维护当中去，而现在呢，跟Apache基金会闹僵，Google更是直接想着另起炉灶了（Go语言），JVM也开始部分闭源了起来，但是也不能否认Oracle为Java做的贡献，Java8的历史意义还是存在的。

这作者就逆天，才发现是参加过Java5的Doug Lea领导的JUC包的源码书写过程当中去的，在我看来JUC包是更加偏向于使用算法实现CAS来保证线程安全的，这就是大佬吧，语言功底+算法，还有什么是干不了的呢？

初读这本书感觉和读设计模式的书的初衷差不多，都是为了更高效的进行程序的开发，但是设计模式都是多少年前的东西了，也无法无缝融入到Java当中来，另外Java的各种语言框架也可以自成体系，形成独立的一种开发范式。  



真的非常想看看作者对Java8的一些看法，虽然已经有好些年了，但是书籍具有一种显著的滞后性，权威的书籍更是少之又少，Java编程思想第五版现在还在试译当中呢。  



C++之父在Java刚面市时候的评价：

![image-20210317101203215](https://gitee.com/LuckyCurve/img/raw/master//img/image-20210317101203215.png)

不得不感慨即使没有从事到Java的开发工作中来，但对语言本身的敏感程度和我们确实是有着天壤之别的。  



从作者的前三版的前言中可以明显感觉到：作者对Java的热情有所降温，但是依然钟爱着Java，特别是当我也了解到Java的历史之后确实也有这种感觉了，更何况是当事人的作者呢  



最后再感慨一下吧，这本书的审校团队包含Java8的首席架构师和Doug Lea。确实是一本值得一读的好书，感谢国家没有把这本书也墙了。  



找到了一张Java发行名称和昵称的对应图了：

![image-20210317102752538](https://gitee.com/LuckyCurve/img/raw/master//img/image-20210317102752538.png)

  

  

  

# 第二章、创建和销毁对象

  

## 第１条：用静态工厂方法替代构造器



创建类的实例除了使用构造方法，我们还可以在类中提供一个静态工厂方法来进行返回，常见的像包装类当中的valueOf方法：

```java
public static Boolean valueOf(boolean b) {
    return (b ? TRUE : FALSE);
}
```

静态工厂方法较之于构造器方法的优势在于

1、可以指定方法名字，实现见名知意的效果，增加可读性，如果有多个构造方法可以尝试使用静态工厂方法

2、不用每次调用方法的时候都进行对象的创建，独特的单例模式或者是使用缓存池的几个基本数据类型封装类都是不必每次都创建对象的

3、可以返回子类型的实例，特别是在Java8之后，常常使用在接口当中的默认方法中，我们通过接口中的静态工厂方法得到一个对象，然后通过该接口的API进行调用，这样就避免用户直接接触到子类，减小了使用负担，**甚至要求通过接口来引用被返回的对象，这是非常合理的**。

> 注意：不要将这些子类的实现也就直接放在接口当中了，因为接口当中默认是public的，还是老老实实创建一个包级别私有的类当中去然后使用

4、可以根据参数来返回不同的类，如传入初始化大小小小于8的参数，那么就返回一个底层数据结构为链表的实现类，如果是大于8就返回底层数据结构为红黑树的实现类，都是非常容易的

5、可以在调用时候才执行类加载，而不是像构造函数那样直接进行了类加载

   

缺点在于：

1、如果类不包含公有的或者是受保护的构造器，那么该类无法被继承

因为子类的创建是依赖于父类的构造方法的，但是直接把构造方法给私有化了，无法访问

书中说到了这也因祸得福了，在Java编程思想中也提到过尽量使用组合而不是继承

2、程序员难以发现这些静态工厂方法，因为通过Javadoc生成的文档仅仅只是将构造函数标粗，相信以后会有所改进。现在是通过命名的方式来尽量让静态工厂方法醒目，常见的如：from、of、valueOf、create等等。  

  

较之于构造方法、静态工厂方法各有优劣，不要一上来就想着直接提供构造方法了，还有别的选择。









