# 计网面试常见问题



自上而下的五层网络结构划分及其作用

应用层：应用层主要是保证应用进程之间的通信和交互规则，应用层协议有：DNS（域名系统，完成域名到操作系统的一个映射），HTTP（超文本传输协议，互联网上运用最为广泛的协议，所有的WWW文件必须遵从这个标准），SMTP（电子邮件发送协议，保证电子邮件的安全送达）

运输层：主要是负责为应用层提供数据传输服务，保证数据的传输，主要协议有TCP（面向连接的，可靠的数据传输服务）、UDP（无连接的，尽最大可能交付的数据传输服务）

网络层：确保数据可以选择到合适的网络路由和交换节点，确保数据及时送达，主要是IP协议和一些路由选择协议，传送IP数据报

数据链路层：保证相邻节点间的数据传输，将IP数据报封装成帧，这里需要进行差错检测，确保每个帧都是正确地，但不确保是否有帧丢失或者是帧乱序

物理层：实现比特流的透明传输，屏蔽底层的传播介质和物理设别之间的差异，发送的信息单位是比特





**TCP三次握手和四次握手**

基本是必问了，主要是确保TCP连接安全的建立和释放

三次握手：建立可靠的连接，**确认双方的数据发送和接收是正常的**

Client——带有SYN标志的数据包（TCP包）——>Server：Server端确认了对方发送正常，自己接收正常

Client<——带有SYN和ACK标志的数据包——Server：Client确认了自己发送正常，自己接收正常，对方发送正常，对方接收正常，Server端确认了对方发送正常，自己接收正常

Client——带有ACK标志的数据包——>Server：Client确认了自己发送正常，自己接收正常，对方发送正常，对方接收正常，Server端确认了自己发送正常，自己接收正常，对方发送正常，对方接受正常

> 整体上看，第二部的Server——Client的SYN标志就比较奇怪了，这里SYN是为了建立并确认从服务端到客户端的通信



四次握手：连接的正确释放

Client——带有FIN标志的数据报——>Server：关闭Client到Server的数据传输

Client<——带有ACK标志的数据报——Server：

Client<——带有FIN标志的数据报——Server：关闭Server与Client的数据连接

Client——带有ACK标志的数据报——Server：

**所有传ACK主要是为了表明我接受到的信息确实是你所发出的，一种确认机制**



TCP和UDP的比较

|          TCP           |        UDP         |
| :--------------------: | :----------------: |
|     面向连接，可靠     |   无连接，不可靠   |
|         字节流         |     用户数据报     |
|       传输效率低       |     传输效率高     |
| TCP报文需要20-60个字节 | UDP报文需要8个字节 |



TCP保证可靠传输的方法

1、来自应用层的数据，TCP会先将其分成一个个报文段

2、对报文段进行编号，将编好号的报文段交给应用层

3、TCP首部拥有校验和用于判断当前TCP包是否损坏，如果损坏需要重传

4、通过流量控制（发送方接收方的缓冲空间）来减少丢包率，避免接收方来不及接收

5、通过拥塞控制来减少数据的发送，从而减少重传的次数

6、ARQ协议 保证了发送数据包一定时间后没有确认就需要重新发送这个报文段



重传涉及到ARQ协议（自动重传请求，TCP层），属于错误纠正协议，通过确认和超时这两个机制保证了数据的可靠传输，主要分为停止等待ARQ协议和连续ARQ协议

接收方在接收到TCP数据报的时候都会返回一个确认号，也就是带有ACK标志的数据报

停止等待ARQ和连续ARQ唯一的区别就是停止等待会发送一个TCP数据报，然后等着确认，而连续ARQ协议则是利用发送窗口和接收窗口将一组TCP数据报直接发出去，，对方会回最后一个的确认号，这里也正是可以通过滑动窗口来进行流量控制的关键



拥塞控制是为了防止过多的数据进入到网络中来，导致网络过载，又不断重试导致网络环境越来越差的过程控制，一般会维护一个拥塞窗口，这样在发送的时候会计算拥塞窗口与接收窗口的较小值作为发送窗口的大小，以此来减少数据的发送，主要有四种算法：慢开始（拥塞窗口大小翻倍）、拥塞避免（加一）、快重传与快恢复



**浏览器输入URL地址到出现页面的过程**

围绕这个思路扯就差不多了

DNS解析获取IP地址——与目标IP地址建立TCP连接（使用到了IP、OSPF（最优的路由器数据传输）、ARP（IP与MAC的转换））——客户端发送HTTP请求——服务器响应HTTP报文——浏览器进行页面渲染——断开TCP连接（HTTP1.0）



状态码

1打头的：信息性状态码，表示请求正在处理

2打头的：成功状态码，表示正常处理完成

3打头的：重定向状态码，需要进行附加操作来完成请求

4打头的：客户端错误状态码，服务器无法处理请求

5打头的：服务器错误状态码，服务器处理请求出错



长连接与短连接

长连接HTTP1.1会设置一个超时时间，只要在这个超时时间之内都会使用同一条TCP连接，不会被回收

短连接HTTP1.0表示每进行一次HTTP操作都会建立一次连接，因此如果访问一个HTML网页，然后其中包含图像，JS文件等，每次加载都需要重新建立TCP连接



HTTP请求是无状态的，不会对请求和响应之间的通信状态进行保存，因此使用Session在服务器内部来维持状态，请求时候通过使用Cookie内部携带一个JSESSIONID属性完成与Session的映射，如果Cookie被禁用了可以将JSESSIONID作为参数传递给后端进行手动处理



URL和URI的区别

URL：统一资源定位符，是更具体的URL，指明了资源的locale，绝对路径

URI：统一资源标志符，可以唯一标识一个资源，相对路径



HTTP和HTTPS的比较

端口：80和443

安全性：HTTP直接进行明文传输，HTTPS传输的是进行加密之后

资源消耗：毋庸置疑HTTP资源消耗低



ping指令使用到的命令

如果ping后面跟的是域名，就需要使用DNS协议将域名解析成IP地址，DNS底层使用到了DUP协议

对目标IP发送ICMP协议（主要用于判断网络是否通畅），对获取到的IP地址，查看是否处于同一网段，如果不处于同一网段，需要使用OSPF协议走最短路径，进入目标子网当中

最后使用ARP协议解析出对应的MAC地址，



http请求分类：

主要了解的有四种：GET、POST、PUT、DELETE

GET和POST的主要区别：

1、方法参数：GET直接放在URL当中，存在长度限制，POST存放于Body中，不存在限制

2、安全性：POST更强



# 操作系统面试常见问题



什么是操作系统

操作系统是管理计算机硬件与软件资源的程序，是计算机的基石。操作系统属于系统软件的核心部分，屏蔽底层硬件的复杂性，让上层软件可以直接和操作系统打交道实现对硬件资源如CPU资源、内存资源和外设的调度。



什么是系统调用

就先得说说操作系统运行时候的两种状态：用户态和核态，在用户态运行的程序只能访问用户程序的数据，处于核态运行的程序几乎能够访问所有的系统资源不受限制

此时如果用户态的进程需要使用核态级别的操作（如文件管理，内存管理等），就需要通过系统调用的方式来完成。



线程与进程之间的区别

可以带着JVM的内存模型来说，因为线程之间是存在共享的，就可以说内存模型中共享了哪些数据。



进程的状态

和线程类似：NEW RUNNING BLOCKING WAITING TIME_WAITING TERMINATED



进程间的通信方式

主要有七种：

1、匿名管道：主要用于父子进程和通信进程之间的通信

2、有名管道：补充匿名管道，严格遵循FIFO，可以实现本机任意两个进程通信

3、信号：通知某个等待进程等待的事件已经发生

4、消息队列：类似于管道的通信方式，但是可以承载更多的数据

5、信号量，用于进程同步，也算是通信的一种

6、共享内存：需要进程同步机制来保证，最有用的进程间通信方式了

7、套接字：Socket，主要用于客户端与服务端的通信

大体上分为：管道、消息队列、共享内存和套接字



线程同步方式：锁机制（Synchronized ReentrantLock等）、信号量（Semaphore、CountDownLatch、CyclicBarrier）、事件（Wait/Notify）



进程调度算法：确定进程执行的顺序以保证CPU的利用率

1、先来先服务	2、短作业优先	3、时间片轮转	4、优先级调度	5、多级反馈队列调度算法（平衡前面集中算法）



操作系统的内存管理机制

内存管理机制主要是为了方便的对内存进行回收，分配

主要有以下几种：

块式管理：将内存分成若干大小不同的块，进程需要申请内存时候就去占据其中一个块，内存利用率极低

页式管理：将内存划分为一页一页的形式，页较小，因此相比于块式管理提高了利用率

段式管理：和页式管理非常相似，将内存分为一段一段的，但是段大小可以由用户来制定而不是和页式管理一样只能使用固定的页大小

可以分为两大类：分配内存连续（块式管理）和分配内存不连续（页式管理和段式管理）

补充：段页式管理：结合了段式管理和页式管理的优点，先将主存划分成若干段，然后在段内部划分页信息。



页式管理中需要维持虚拟地址与物理地址之间的转换，需要使用页表来存储映射关系，但是随着内存的增大，页表体积也随之增大，查询速度变慢。于是提出了快表的概念，可以认为快表是页表的cache，可以高速的完成查找。多级页表则是防止页表过大占用大量内存连续空间，于是拆分开来存储，属于时间换空间的方式。



分页和分段的异同

同：对比于分块管理，都提升了内存利用率，减少了内存碎片化的程度，都是离散存储的

异：段可以用户自定，页大小是定死的、分页造成的是内碎片，分段造成的是外碎片





虚拟内存

操作系统中大量使用到了虚拟技术，虚拟内存可能会比物理内存大得多，常见的实现如使用硬盘空间扩充来作为内存地址，通过虚拟内存，可以让进程感觉到自己在使用一段连续的内存空间，以此来减少程序出错的概率



局部性原理

发现程序执行的时候往往呈现局部性规律，主要包含两个方面：

时间局部性：如果程序中某条指令被执行过，不久后该指令可能被再次执行，如果数据被访问过，可能不久之后又会被访问，产生时间局部性的原因是存在大量循环操作。

空间局部性：一旦程序访问了某个存储单元，在不久之后附近的存储单元也会被访问，因为程序总是顺序存放，顺序执行的，数据也一般以聚合形式存储在一起。



页面置换算法

由于将虚拟内存划分成一个个页，如果请求页不在内存当中，就会发生缺页中断

如果此时内存中所存储页数量达到上限，那么就会使用页面置换算法决定淘汰掉哪一页

- FIFO（First In First Out）：淘汰内存驻留时间最久的页面
- LRU（Least Currently Used）：淘汰最久未使用的，是通过给每个页面维持一个持续时间T，移除T最大的
- LFU（Least Frequently Used）：淘汰掉最少使用的页面
- OPT：最佳页面置换算法，存在于理论当中，移除以后最长时间不会被使用到的页面